# TheWebSnippet SDK
## Overview
This documentation will guide you through implementing TheWebSnippet SDK into your own app.

<div style="width: 100%;">
    <img src="images/appIcon.png" alt="My Custom Icon" style="display: block; margin: 32px auto; max-width: 100%; height: auto;" />
</div>

## Description
TODO: Add description

## Quick Tutorial
### Installation

Add the following dependency to your `build.gradle` file:

```gradle
dependencies {
    implementation 'si.inova.tws:core:1.0.0' // Contains UI Composable components for displaying web pages
    implementation 'si.inova.tws:manager:1.0.0' // Contains TWSManager for loading and refreshing snippets in real time
}
```

### Step 1: Provide metada for TWS SDK

Before using the TWS SDK, ensure you set up metadata keys for organization and project in AndroidManifest.xml. 
These metadata keys allow the SDK to identify the correct organization and project context when initializing your TWSManager:

```xml
<application>
   <meta-data
           android:name="si.inova.tws.ORGANIZATION_ID"
           android:value="your_organization_id" />
   <meta-data
           android:name="si.inova.tws.PROJECT_ID"
           android:value="your_project_id" />
</application>
```

### Step 2: Using WebSnippetComponent to display snippet

Set up WebSnippetComponent to display a specific snippet. Hereâ€™s how to collect snippets and display "home" snippet:

```kotlin
val manager = TWSFactory.get(context)

setContent {
   val projectSnippets = manager.snippets.collectAsStateWithLifecycle(null).value

   when (projectSnippets) {
      is TWSOutcome.Success -> {
         val home = projectSnippets.data.first { it.id == "home" }
         TWSView(snippet = home)
      }

      else -> {
         // Handle errors or loading state here
      }
   }
}
```

## How to handle Google Login

#### Define base url while generating apk

When generating App Bundles using CLI, include the optional parameter `--google-login-base-url`. The URL should follow the format https://domain.name/path and should define the page to where user is redirected after a successful login.
*(subject of change, will be defined when web implements bundle creating)*

#### Declare website associations
1. Create an assetlinks.json file from bottom template (note that you can find pregenerated file with your app bundles):
    ```json
    [{
        "relation": ["delegate_permission/common.handle_all_urls"],
        "target": {
          "namespace": "android_app",
          "package_name": "com.example",
          "sha256_cert_fingerprints": ["hash_of_app_certificate"]
        }
    }]
    ```
2. Replace "com.example" for the "package_name" with the actual package name
3. Replace "hash_of_app_certificate" with the actual hash, that was generated by the CLI while creating your Android apk
4. Publish generated Asset Links JSON file to your website to the following location:
    ```
    https://domain.name/.well-known/assetlinks.json
    ```
